@model ProyectoBasesDatos.Models.Paciente

@{
    ViewData["Title"] = "Editar Paciente";
}

<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-light border-0 shadow-sm">
                <div class="card-body p-4">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h1 class="h3 mb-0">Editar Paciente</h1>
                        </div>
                        <div class="col-md-4 text-md-end mt-3 mt-md-0">
                            <a asp-action="Index" class="btn btn-outline-secondary px-3">
                                <i class="fas fa-arrow-left me-2"></i>
                                Volver a la Lista
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white p-4 border-0">
                    <div class="d-flex align-items-center">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 48px; height: 48px;">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-0">Información del Paciente</h5>
                            <p class="text-muted mb-0 small">Modifique los campos necesarios para actualizar la información</p>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4">
                    <form asp-action="Edit" class="needs-validation" novalidate>
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

                        <div class="mb-4">
                            <h6 class="text-uppercase text-muted small fw-bold mb-3">
                                <i class="fas fa-id-card me-2"></i>Información Personal
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input asp-for="Cedula" class="form-control bg-light" id="inputCedula" placeholder="Cédula" readonly />
                                        <label asp-for="Cedula">Cédula</label>
                                        <span asp-validation-for="Cedula" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <select asp-for="Genero" class="form-select" id="inputGenero" required>
                                            <option value="">Selecciona un género</option>
                                            <option value="F">Femenino</option>
                                            <option value="M">Masculino</option>
                                        </select>
                                        <label asp-for="Genero">Género</label>
                                        <span asp-validation-for="Genero" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input name="Nombre" class="form-control" id="inputNombre" placeholder="Nombre" value="@Model.CorreoNavigation.Nombre" required />
                                        <label for="Nombre">Nombre</label>
                                        <div class="invalid-feedback">Por favor, ingresa el nombre.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input name="PrimerApellido" class="form-control" id="inputPrimerApellido" placeholder="Primer Apellido" value="@Model.CorreoNavigation.PrimerApellido" required />
                                        <label for="PrimerApellido">Primer Apellido</label>
                                        <div class="invalid-feedback">Por favor, ingresa el primer apellido.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-floating mb-3">
                                <input name="SegundoApellido" class="form-control" id="inputSegundoApellido" placeholder="Segundo Apellido" value="@Model.CorreoNavigation.SegundoApellido" />
                                <label for="SegundoApellido">Segundo Apellido</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input asp-for="FechaNacimiento" class="form-control" id="inputFechaNacimiento" type="date" required />
                                <label asp-for="FechaNacimiento">Fecha de Nacimiento</label>
                                <span asp-validation-for="FechaNacimiento" class="text-danger"></span>
                                <div class="invalid-feedback">Por favor, ingresa la fecha de nacimiento.</div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h6 class="text-uppercase text-muted small fw-bold mb-3">
                                <i class="fas fa-address-book me-2"></i>Información de Contacto
                            </h6>
                            <div class="form-floating mb-3">
                                <input asp-for="Correo" class="form-control bg-light" id="inputCorreo" placeholder="correo@ejemplo.com" readonly />
                                <label asp-for="Correo">Correo Electrónico</label>
                                <span asp-validation-for="Correo" class="text-danger"></span>
                                <div class="form-text">El correo electrónico no puede ser modificado.</div>
                            </div>
                            <div class="form-floating mb-3">
                                <input name="Telefono" class="form-control" id="inputTelefono" placeholder="Teléfono" value="@Model.CorreoNavigation.Telefono" pattern="[0-9]{1,8}" maxlength="8" required />
                                <label for="Telefono">Teléfono</label>
                                <div class="invalid-feedback">Por favor, ingresa un número de teléfono válido.</div>
                            </div>
                            <div class="form-floating mb-3">
                                <input asp-for="Direccion" class="form-control" id="inputDireccion" placeholder="Dirección" required />
                                <label asp-for="Direccion">Dirección</label>
                                <span asp-validation-for="Direccion" class="text-danger"></span>
                                <div class="invalid-feedback">Por favor, ingresa la dirección.</div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-light" onclick="location.href='@Url.Action("Index")'">
                                <i class="fas fa-times me-2"></i>Cancelar
                            </button>
                            <div>
                                <button type="submit" class="btn btn-primary px-4">
                                    <i class="fas fa-save me-2"></i>Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Validación de formulario
        (function () {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();

        // Validación del teléfono - solo permitir números
        document.getElementById('inputTelefono').addEventListener('input', function (event) {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    </script>
}

<style>
    .form-floating > .form-select,
    .form-floating > .form-control {
        height: calc(3.5rem + 2px);
        line-height: 1.25;
    }

    .card {
        border-radius: 10px;
    }

    .btn {
        border-radius: 5px;
    }

    .form-control[readonly] {
        cursor: not-allowed;
    }
</style>